(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){},16:function(e,t,n){},18:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(7),l=n.n(i),s=n(1),o=n(2),c=n(4),u=n(3),f=n(5);n(14),n(16);function h(e){return 1===e?10:2===e?40:99}function g(e){for(var t=function(e){return 1===e?9:2===e?16:30}(e),n=function(e){return 1===e?9:16}(e),r=new Array(n),a=0;a<n;a++)r[a]=new Array(t);for(var i=0;i<n;i++)for(var l=0;l<t;l++)r[i][l]={flag:!1,mine:!1,surroundingMineCount:0,checked:!1};return function(e,t){for(var n=e.length,r=e[0].length,a=r*n,i=new Array(a),l=0;l<a;l++)i[l]=l;for(var s=0,o=i.length-1;s<t;o--){var c=Math.floor(Math.random()*(o+1)),u=i[o];i[o]=i[c],i[c]=u,s++}for(var f=0;f<t;f++){var h=i[a-1-f],g=Math.floor(h/r),m=h%r;e[g][m].mine=!0}}(r,h(e)),function(e,t,n){for(var r=0;r<n;r++)for(var a=0;a<t;a++)e[r][a].mine&&(r>0&&(a>0&&(e[r-1][a-1].surroundingMineCount+=1),a<t-1&&(e[r-1][a+1].surroundingMineCount+=1),e[r-1][a].surroundingMineCount+=1),r<n-1&&(a>0&&(e[r+1][a-1].surroundingMineCount+=1),a<t-1&&(e[r+1][a+1].surroundingMineCount+=1),e[r+1][a].surroundingMineCount+=1),a>0&&(e[r][a-1].surroundingMineCount+=1),a<t-1&&(e[r][a+1].surroundingMineCount+=1))}(r,t,n),r}function m(e){return 1===e?"blue":2===e?"green":3===e?"red":4===e?"#000099":5===e?"brown":6===e?"#3399ff":7===e?"black":8===e?"grey":void 0}var v=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"Cell",onClick:this.props.onClick,onContextMenu:this.props.onClick},this.renderContent())}},{key:"renderContent",value:function(){var e=this.props,t=e.cell,n=e.status;if(0===n||1===n){if(t.checked){if(t.surroundingMineCount>0){var r=m(t.surroundingMineCount);return a.a.createElement("div",{style:{color:r}},t.surroundingMineCount)}return a.a.createElement("div",null," ")}return a.a.createElement(a.a.Fragment,null,a.a.createElement("img",{style:{backgroundColor:"transparent",width:"100%",height:"100%"},src:"img/tile.png",alt:""}),t.flag&&a.a.createElement("img",{src:"img/flag.png",alt:"",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}))}if(2===n){if(t.mine)return t.checked?a.a.createElement("img",{src:"img/explodedMine.png",alt:""}):a.a.createElement("img",{src:"img/mine.png",alt:""});if(t.surroundingMineCount>0){var i=m(t.surroundingMineCount);return a.a.createElement("div",{style:{color:i}},t.surroundingMineCount)}return a.a.createElement("div",null," ")}}}]),t}(a.a.Component),d=function(e){function t(e){var n;Object(s.a)(this,t),n=Object(c.a)(this,Object(u.a)(t).call(this,e));var r=g(e.defaultLevel);return n.state={level:e.defaultLevel,status:0,time:0,flagsCount:0,gameStarted:!1,data:r,openedCellCount:0,interval:null},n}return Object(f.a)(t,e),Object(o.a)(t,[{key:"setLevel",value:function(e){var t=parseInt(e.target.value,10);isNaN(t)||this.resetGame(parseInt(e.target.value,10))}},{key:"resetGame",value:function(e){this.state.interval&&clearInterval(this.state.interval),this.setState({time:0,flagsCount:0,level:e,data:g(e),status:0,openedCellCount:0,interval:null})}},{key:"increaseTime",value:function(){this.setState(function(e){return{time:e.time+1}}),console.log("Time")}},{key:"render",value:function(){var e=this,t=this.state,n=t.status,r=t.level,i="img/smiley.png";return 1===n?i="img/win.png":2===n&&(i="img/lose.png"),a.a.createElement("div",{className:"Minesweeper"},a.a.createElement("div",{className:"MinesweeperLevelBar"},a.a.createElement("form",{onClick:this.setLevel.bind(this)},a.a.createElement("div",null,a.a.createElement("input",{type:"radio",value:"1",name:"level",checked:1===r?"checked":null}),"Easy"),a.a.createElement("div",null,a.a.createElement("input",{type:"radio",value:"2",name:"level",checked:2===r?"checked":null}),"Medium"),a.a.createElement("div",null,a.a.createElement("input",{type:"radio",value:"3",name:"level",checked:3===r?"checked":null}),"Hard"))),a.a.createElement("div",{className:"MinesweeperInfoBar"},a.a.createElement("div",null,"Time: ",this.state.time),a.a.createElement("div",{style:{flex:0,margin:"5px"}},a.a.createElement("button",{style:{backgroundColor:"transparent",display:"flex",padding:"5px"}},a.a.createElement("img",{src:i,alt:"",onClick:this.resetGame.bind(this,r)}))),a.a.createElement("div",null,"Remaining: ",h(this.state.level)-this.state.flagsCount)),a.a.createElement("div",{className:"MinesweeperGrid"},this.state.data.map(function(t,r){return a.a.createElement("div",{className:"MinesweeperGridRow",key:r},t.map(function(t,i){return a.a.createElement(v,{cell:e.state.data[r][i],key:i,status:n,onClick:e.cellClick.bind(e,r,i)})}))})))}},{key:"cellClick",value:function(e,t,n){if(0===this.state.status)if(n.preventDefault(),0===n.nativeEvent.button){if(this.state.data[e][t].flag)return;var r=this.state.data.slice(),a=0,i=this.state.openedCellCount,l=this.state.interval;r[e][t].mine?(a=2,null!=l&&clearInterval(l),l=null,r[e][t].checked=!0):(i+=this.openCell(e,t,r),null===l&&(l=setInterval(this.increaseTime.bind(this),1e3))),i+h(this.state.level)===r.length*r[0].length&&(a=1,null!=l&&clearInterval(l),l=null),this.setState({data:r,status:a,openedCellCount:i,interval:l})}else if(2===n.nativeEvent.button){var s,o=this.state.data.slice();o[e][t].flag?(o[e][t].flag=!1,s=this.state.flagsCount-1):(o[e][t].flag=!0,s=this.state.flagsCount+1),this.setState({data:o,flagsCount:s})}}},{key:"openCell",value:function(e,t,n){var r=n[e][t];if(r.checked)return 0;var a=1;return r.checked=!0,r.surroundingMineCount>0?a:(e>0&&(t>0&&(a+=this.openCell(e-1,t-1,n)),t<n[0].length-1&&(a+=this.openCell(e-1,t+1,n)),a+=this.openCell(e-1,t,n)),e<n.length-1&&(t>0&&(a+=this.openCell(e+1,t-1,n)),t<n[0].length-1&&(a+=this.openCell(e+1,t+1,n)),a+=this.openCell(e+1,t,n)),t>0&&(a+=this.openCell(e,t-1,n)),t<n[0].length-1&&(a+=this.openCell(e,t+1,n)),a)}}]),t}(a.a.Component);d.defaultProps={defaultLevel:1};var p=d;n(18);l.a.render(a.a.createElement(p,null),document.getElementById("root")),"serviceWorker"in navigator&&window.addEventListener("load",function(){var e="".concat("","/service-worker.js");navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})})},8:function(e,t,n){e.exports=n(20)}},[[8,2,1]]]);
//# sourceMappingURL=main.933c6f23.chunk.js.map